---
title: "Markov Switching Model Document"
author: "Hannah de Nobrega"
# date: "November 2021"
date: "`r Sys.Date()`"
bibliography: Tex/ref.bib       # Do not edit: Keep this naming convention and location.
output:
  pagedown::html_paged:
    # template: wp_paged.html
    # css: ['wp.css', 'wp-fonts.css', 'wp-page.css']
    css: ["Template/default-fonts-Texevier.css", "Template/default-page-Texevier.css", "Template/default-Texevier.css"]
    csl: Template/harvard-stellenbosch-university.csl # referencing format used.
    template: ["Template/paged-Texevier.html"]

    toc: true
    # change to true for a self-contained document, but it'll be a litte slower for Pandoc to render
    self_contained: TRUE
abstract: |
    This is an abstract. Much can be written here. Uncomment this line to go without an abstract.
    Abstracts have no spaces, but can have bullets.

    Bullets can be created as follows

    + You can add bullets, but do not add colons please.

    + Line breaks are also not permitted.

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE)

pacman::p_load(modelsummary, gt, knitr, kableExtra, tidyverse)

rm(list = ls()) # Clean your environment:

gc() # garbage collection - It can be useful to call gc after a large object has been removed, as this may prompt R to return memory to the operating system.

if (!require("pacman")) install.packages("pacman") # use pacman to load in all the necessary packages for your project

pacman::p_load(MSwM, tidyverse) # load in the packages needed 

list.files('code/', full.names = T, recursive = T) %>% .[grepl('.R', .)] %>% as.list() %>% walk(~source(.)) # load in any functions that have been created. These belong in the "code" folder and are written as separate scripts to keep their individual environments sanitized 
```

\newpage

# Purpose {-}

Purpose of this work folder is to create a small working example of a Markov switching model, using guidelines presented by Tsey & Chen (2018). 

The minimum working example data set is stored in the data folder.

Add binary files in bin, and closed R functions in code. Human Readable settings files (e.g. csv) should be placed in settings

# Markov switching model and the MSwM package: a two state model

## Prepare the data 

#### Generating MS process x(t) and explanatory variable z(t)

```{r}


```




```{r}
X <- data.frame(x)

m1 <- lm(xt ~ -1+cnst+zt,data=X)
summary(m1)

m2 <- msmFit(m1,k=2,p=1,sw=c(T,T,T,T))
summary(m2)

```



```{r}
plotDiag(m2) # Residual ACF and PACF
par(mfcol=c(2,1))


plotDiag(m2,which=1) # Residual plot
plotDiag(m2,which=2) # Q-Q plot of residuals
slotNames(m2)
slotNames(m2@Fit)
dim(m2@Fit@filtProb)
par(mfrow=c(2,1))

plot(m2@Fit@filtProb[,1],type='l',main='Filtered Probability Regime 1', ylab='prob',xlab='time')

plot(m2@Fit@smoProb[,2],type='l',main='Smoothed Probability Regime 2',ylab='prob',xlab='time')
```


# References {-}

<div id="refs"></div>


# Appendix {-}

## Appendix A {-}

Some appendix information here

## Appendix B {-}



